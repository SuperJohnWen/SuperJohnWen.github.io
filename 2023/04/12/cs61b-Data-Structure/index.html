<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>cs61b-Data Structure | Big John</title><meta name="keywords" content="cs61b"><meta name="author" content="John Wen,yuehanwe@usc.edu"><meta name="copyright" content="John Wen"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Data Structures Some Resources  Big-O Cheat Sheet  Tree  A tree consists of:  A set of nodes. A set of edges that connect those nodes.  Constraint: There is exactly one path between any two nodes">
<meta property="og:type" content="article">
<meta property="og:title" content="cs61b-Data Structure">
<meta property="og:url" content="https://superjohnwen.github.io/2023/04/12/cs61b-Data-Structure/index.html">
<meta property="og:site_name" content="Big John">
<meta property="og:description" content="Data Structures Some Resources  Big-O Cheat Sheet  Tree  A tree consists of:  A set of nodes. A set of edges that connect those nodes.  Constraint: There is exactly one path between any two nodes">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://fastly.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png">
<meta property="article:published_time" content="2023-04-12T22:20:04.000Z">
<meta property="article:modified_time" content="2023-04-18T06:16:46.237Z">
<meta property="article:author" content="John Wen">
<meta property="article:tag" content="cs61b">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://fastly.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://superjohnwen.github.io/2023/04/12/cs61b-Data-Structure/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":450},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'cs61b-Data Structure',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-04-17 23:16:46'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0"><link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/duck.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">33</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">7</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> Life</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/diary/"><span> Diary</span></a></li><li><a class="site-page child" href="/photo/"><span> Photo</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/About/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://fastly.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Big John</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> Life</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/diary/"><span> Diary</span></a></li><li><a class="site-page child" href="/photo/"><span> Photo</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/About/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">cs61b-Data Structure</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-04-12T22:20:04.000Z" title="Created 2023-04-12 15:20:04">2023-04-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-04-18T06:16:46.237Z" title="Updated 2023-04-17 23:16:46">2023-04-17</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="cs61b-Data Structure"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><font size="4">
<h1 id="data-structures">Data Structures</h1>
<h2 id="some-resources">Some Resources</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.bigocheatsheet.com/">Big-O Cheat Sheet</a></li>
</ul>
<h2 id="tree">Tree</h2>
<ol>
<li>A tree consists of:
<ul>
<li>A set of nodes.</li>
<li>A set of edges that connect those nodes.
<ul>
<li>Constraint: There is exactly one path between any two nodes</li>
</ul>
</li>
</ul>
</li>
</ol>
<img src="/2023/04/12/cs61b-Data-Structure/trees.png">
<ol start="2">
<li>Rooted Tree and Rooted Binary Trees<br>
In a rooted tree, we call one node the root.
<ul>
<li>Every node N except the root has exactly one parent, defined as the first node on the path from N to the root.</li>
<li>A node with no child is called a leaf<br>
In a rooted binary tree, every node has either 1, 0, or 2 children<br>
<img src="/2023/04/12/cs61b-Data-Structure/trees_1.png"></li>
</ul>
</li>
</ol>
<h2 id="tree-traversal">Tree Traversal</h2>
<h3 id="traversal-orderings">Traversal Orderings</h3>
<ol>
<li>Level Order</li>
</ol>
<ul>
<li>Visit top-to-bottom, left-to-right</li>
</ul>
<ol start="2">
<li>Depth First Traversals</li>
</ol>
<ul>
<li>3 types: Preorder, Inorder, Postorder</li>
</ul>
<h4 id="depth-first-traversals">Depth First Traversals</h4>
<img src="/2023/04/12/cs61b-Data-Structure/traversal.png">
<ol>
<li>preOrder (root-left-right)<br>
The result of preOrder for the above tree is <code>D B A C F E G</code></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">preOrder(BSTNode x) &#123;</span><br><span class="line">  <span class="keyword">if</span> (x == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">  print(x.key)</span><br><span class="line">  preOrder(x.left)</span><br><span class="line">  preOrder(x.right)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>Inorder (left-root-right)<br>
the result of preOrder for the above tree is <code>A B C D E F G</code></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">inOrder(BSTNode x) &#123;</span><br><span class="line">  <span class="keyword">if</span> (x == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">  preOrder(x.left)</span><br><span class="line">  print(x.key)</span><br><span class="line">  preOrder(x.right)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>Postorder (left-right-root)<br>
the result of preOrder for the above tree is <code>A C B E G F D</code></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">inOrder(BSTNode x) &#123;</span><br><span class="line">  <span class="keyword">if</span> (x == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">  preOrder(x.left)</span><br><span class="line">  preOrder(x.right)</span><br><span class="line">  print(x.key)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="binary-search-tree-bst">Binary Search Tree (BST)</h2>
<h3 id="bst-definition">BST Definition</h3>
<p>A binary search tree is a rooted binary tree with the BST property</p>
<p><strong>BST Property</strong>. For every node X in the tree:</p>
<ul>
<li>Every key in the <strong>left</strong> subtree is <strong>less</strong> than X’ key</li>
<li>Every key in the <strong>right</strong> subtree is <strong>greater</strong> than X’s key</li>
</ul>
<div class="note info simple"><p><strong>Three rules: Complete, Transitive and Antisymmetric.<br>
One consequence of these rules: No duplicate keys allowed!</strong></p>
</div>
<h3 id="bst-operations">BST Operations</h3>
<ol>
<li>Search
<ul>
<li>Start at the root and compare it with the search element.</li>
<li>if <code>X &gt; element</code>, move on the root’s <code>right child</code>.</li>
<li>if <code>X &lt; element</code>, move on the root’s <code>left child</code>.</li>
<li>repeat process recursively until find the item or get to a leaf in which case the tree does not contain the item</li>
</ul>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> BST <span class="title function_">find</span><span class="params">(BST T, Key sk)</span> &#123;</span><br><span class="line">   <span class="keyword">if</span> (T == <span class="literal">null</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">   <span class="keyword">if</span> (sk.equals(T.key))</span><br><span class="line">      <span class="keyword">return</span> T;</span><br><span class="line">   <span class="keyword">else</span> <span class="keyword">if</span> (sk ≺ T.key)</span><br><span class="line">      <span class="keyword">return</span> find(T.left, sk);</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">return</span> find(T.right, sk);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>Insert</li>
</ol>
<ul>
<li>First, search in the tree for node. If find it, do nothing.</li>
<li>if don’t find it, we will be at the leaf node, add the new element</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> BST <span class="title function_">insert</span><span class="params">(BST T, Key ik)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (T == <span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BST</span>(ik);</span><br><span class="line">  <span class="keyword">if</span> (ik ≺ T.key)</span><br><span class="line">    T.left = insert(T.left, ik);</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (ik ≻ T.key)</span><br><span class="line">    T.right = insert(T.right, ik);</span><br><span class="line">  <span class="keyword">return</span> T;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>Delete<br>
Three cases:
<ol>
<li>no children<br>
It is a leaf, just delete its parent pointer.<br>
Example: delete(“flat”):<br>
<img src="/2023/04/12/cs61b-Data-Structure/delete.png"></li>
<li>one children<br>
Reassign the parent’s child pointer to the node’s child.<br>
Example: delete(“flat”):<br>
<img src="/2023/04/12/cs61b-Data-Structure/delete1.png"></li>
<li>two children<br>
Two solutions: Use it’s right child’s <code>rightest</code> node or it’s left child’s <code>leftest</code> node to replace it.<br>
For example: delete k. use ‘g’ or ‘m’ to replace k.<br>
<img src="/2023/04/12/cs61b-Data-Structure/delete3.png"></li>
</ol>
</li>
</ol>
<h3 id="height-and-depth">Height and Depth</h3>
<p>Height and average depth are important properties of BSTs</p>
<ul>
<li>The <code>depth</code> of a node is how far it is from the root. e.g. depth(g) = 2</li>
<li>The <code>height</code> of a tree is the depth of its deepest leaf, e.g. height(T) = 4</li>
<li>The <code>average depth</code> of a tree is the average depth of a tree’s nodes e.g. (<strong>0</strong>x1 + <strong>1</strong>x2 + <strong>2</strong>x4 + <strong>3</strong>x6 + <strong>4</strong>x1) / (1+2+4=6+1) = 2.35</li>
</ul>
<p>Height abd average depth determine runtimes for BST operations</p>
<ul>
<li>The <code>height</code> of a tree determines the worst case runtime to find a node.
<ul>
<li>Example: Worst case is contains(s), requires 5 comparisons (height+1)</li>
</ul>
</li>
<li>The <code>average depth</code> determines the average case runtime to find a node.
<ul>
<li>Example: Average case is 3.35 comparisons (average depth + 1).</li>
</ul>
</li>
</ul>
  <img src="/2023/04/12/cs61b-Data-Structure/height.png">
<h2 id="b-trees-2-3-trees-2-3-4-trees">B-trees / 2-3 trees / 2-3-4 trees</h2>
<h3 id="insertion">Insertion</h3>
<p>To get a balanced (bushy) tree, which will prevent the worst case runtime of N in BSTs, we never add a leaf node. Just add to a current leaf node. Like following figure:<br>
<img src="/2023/04/12/cs61b-Data-Structure/btree1.png"></p>
<p>But this idea will degenerate a linked list at last which will lead to a runtime of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span> again.</p>
<p><strong>Solution:</strong> Set a limit on the number of elements in a single node. Like L = 3. If we add a new element to a node when it already has 3 elements, we will split the node in half by bumping up the middle left node. Like following figure:<br>
<img src="/2023/04/12/cs61b-Data-Structure/btree2.png"></p>
<p>These trees called <strong>2-3-4 or 2-3 trees</strong></p>
<ul>
<li>B-trees of order <code>L = 3</code> called a <code>2-3-4 tree</code> or a <code>2-4 tree</code>
<ul>
<li>“2-3-4” refers to the number of children that a node can have. e.g. a 2-3-4 tree node may have 2, 3, or 4 children.</li>
</ul>
</li>
<li>B-trees of order <code>L = 2</code> called a <code>2-3 tree</code><br>
<img src="/2023/04/12/cs61b-Data-Structure/btree3.png"></li>
</ul>
<p>And here is a B-tree Visualization tool can generate the processing of creation of different b trees:<a target="_blank" rel="noopener" href="https://www.cs.usfca.edu/~galles/visualization/BTree.html">https://www.cs.usfca.edu/~galles/visualization/BTree.html</a></p>
<p>Because of the way B-Trees are constructed, we get two nice invariants:</p>
<ul>
<li>All leaves must be the same distance from the source.</li>
<li>A non-leaf node with k items must have exactly k+1 children</li>
</ul>
<h3 id="deletion">Deletion</h3>
<p><a target="_blank" rel="noopener" href="https://docs.google.com/presentation/d/1zhQDvbcDZ9RJgJl0bmqwFFlHP8ExbDFo36Q9ZWH9EgU/edit#slide=id.g508ece10b0_1_1305">Deletion Operations</a></p>
<h2 id="llrb-left-leaning-red-black-tree">LLRB (Left Leaning Red Black Tree)</h2>
<h2 id="hash-table">Hash Table</h2>
<h3 id="start-with-dataindexedintegerset">Start with “DataIndexedIntegerSet”</h3>
<p>Suppose we create an ArrayList of type <code>boolean</code> and size 2 billion. Let everything be false by default.</p>
<ul>
<li>The <code>add(int x)</code> method simply sets the <code>x</code> position in ArrayList to true.</li>
<li>The <code>contains(int x)</code> method simply returns whether the <code>x</code> position in ArrayList is <code>true</code> or <code>false</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataIndexedIntegerSet</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span>[] present;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DataIndexedIntegerSet</span><span class="params">()</span> &#123;</span><br><span class="line">        present = <span class="keyword">new</span> <span class="title class_">boolean</span>[<span class="number">2000000000</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        present[i] = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> present[i];</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><strong>Problem of above approach:</strong></p>
<ul>
<li>Extremely wasteful. If 1 byte per <code>boolean</code>, the above needs <code>2GB</code>. And user may only insert handful items.</li>
<li>What do we do if we want to insert a <code>String</code>?</li>
</ul>
<h3 id="solving-the-word-insertion-problem">Solving the word-insertion problem</h3>
<p>Now we want to insert the <code>String</code> to the ArrayList, How that works?</p>
<h4 id="use-integer-to-represent-string">Use Integer to represent String</h4>
<p>We can use the idea of how number system works:<br>
A four digit number, say 5149, can be written as</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5</mn><mo>∗</mo><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup><mo>+</mo><mn>1</mn><mo>∗</mo><mn>1</mn><msup><mn>0</mn><mn>2</mn></msup><mo>+</mo><mn>4</mn><mo>∗</mo><mn>1</mn><msup><mn>0</mn><mn>1</mn></msup><mo>+</mo><mn>9</mn><mo>∗</mo><mn>1</mn><msup><mn>0</mn><mn>0</mn></msup></mrow><annotation encoding="application/x-tex">5 * 10^3 + 1 * 10^2 + 4 * 10^1 + 9 * 10^0
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>Similarly, there are 26 letters in the english lowercase alphabet. We use <code>26</code> as the multiplier. And give each letter a number like : <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mi>b</mi><mo>=</mo><mn>2</mn><mo separator="true">,</mo><mi>c</mi><mo>=</mo><mn>3</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>z</mi><mo>=</mo><mn>26</mn></mrow><annotation encoding="application/x-tex">a = 1, b = 2, c = 3, ...., z = 26</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">6</span></span></span></span> Then the <code>&quot;cat&quot;</code> can be represented as:</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mo>∗</mo><mn>2</mn><msup><mn>6</mn><mn>2</mn></msup><mo>+</mo><mn>1</mn><mo>∗</mo><mn>2</mn><msup><mn>6</mn><mn>1</mn></msup><mo>+</mo><mn>20</mn><mo>∗</mo><mn>2</mn><msup><mn>6</mn><mn>0</mn></msup></mrow><annotation encoding="application/x-tex">3 * 26^2 + 1 * 26^1 + 20 * 26^0
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord"><span class="mord">6</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord"><span class="mord">6</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord"><span class="mord">6</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>Code will be like:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataIndexedEnglishWordSet</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span>[] present;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DataIndexedEnglishWordSet</span><span class="params">()</span> &#123;</span><br><span class="line">        present = <span class="keyword">new</span> <span class="title class_">boolean</span>[<span class="number">2000000000</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        present[englishToInt(s)] = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        resent present[englishToInt(s)];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">letterNum</span><span class="params">(String s, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">    <span class="comment">/** Converts ith character of String to a letter number.</span></span><br><span class="line"><span class="comment">    * e.g. &#x27;a&#x27; -&gt; 1, &#x27;b&#x27; -&gt; 2, &#x27;z&#x27; -&gt; 26 */</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">ithChar</span> <span class="operator">=</span> s.charAt(i)</span><br><span class="line">    <span class="keyword">if</span> ((ithChar &lt; <span class="string">&#x27;a&#x27;</span>) || (ithChar &gt; <span class="string">&#x27;z&#x27;</span>)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ithChar - <span class="string">&#x27;a&#x27;</span> + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">englishToInt</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">intRep</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0l</span> i &lt; s.length(); i += <span class="number">1</span>) &#123;</span><br><span class="line">        intRep = intRep * <span class="number">26</span>;</span><br><span class="line">        intRep += letterNum(s, i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> intRep;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="integer-overflow-and-hash-code">Integer Overflow and Hash code</h4>
<p>In Java, the largest possible integer is 2,147,483,647. If you go over this limit, you overflow, starting back over at the smallest integer, which is -2,147,483,648. In other words, the next number after 2,147,483,647 is -2,147,483,648.</p>
<p>Due to above limitation, we will get wrong number, For example:</p>
<ul>
<li>With base 126, we will run into overflow even for short strings.
<ul>
<li>“omens” = 28,196,917,171, which is much greater than the maximum integer!</li>
<li><code>asciiToint('omens')</code> will give us -1,867,853,901 instead. And it can result in collisions like following picture<br>
<img src="/2023/04/12/cs61b-Data-Structure/collisions.png"></li>
</ul>
</li>
</ul>
<p>The official explanation of hash code: a hash code “<em><strong>projects a value from a set with many (or even an infinite number of) members to a value from a set with a fixed number of (fewer) members.</strong></em>”</p>
<p><strong>Pigeonhole Principle</strong> tell us that if there are more than X possible items (X &gt; container capacity), multiple items will share the same hash code.</p>
<center>10 pigeons, 9 boxes, two in one hole.</center>
<img src="/2023/04/12/cs61b-Data-Structure/pigeon.png">
<h4 id="hash-table">Hash Table</h4>
<p>Suppose N items have the same numerical representation h, we store a “bucket” of these N item at position h. The implementation of this bucket could use ArrayLists, LinkedList, ArraySet, and ect.<br>
<img src="/2023/04/12/cs61b-Data-Structure/hashtable1.png"></p>
<p>Each bucket in array is initially empty, When an item x gets added at the index h:</p>
<ul>
<li>if bucket h is empty, we create a new list containing x and store it at index h</li>
<li>if bucket h i already a list, we add x to this list if it is not already present.<br>
<img src="/2023/04/12/cs61b-Data-Structure/hashtable2.png"></li>
</ul>
<p>To improve it, we can use modulus of hahscode to reduce bucket count.</p>
<p>The data structure we’ve just created here is called a <strong>hash table</strong>.</p>
<ul>
<li>Data is converted by a <strong>hash function</strong> into an integer representation called a <strong>hash code</strong></li>
<li>The <strong>hash code</strong> is then <strong>reduced</strong> to a valid index, usually using the modulus operator.<br>
<img src="/2023/04/12/cs61b-Data-Structure/hashtable3.png"></li>
</ul>
<div class="note info modern"><p>Q: What’s the runtime of current hash table?<br>
A: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo stretchy="false">(</mo><mi>Q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\theta(Q)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mopen">(</span><span class="mord mathdefault">Q</span><span class="mclose">)</span></span></span></span>, where Q is the length of the longest list.</p>
</div>
<h4 id="improve-performance-of-hash-table">Improve performance of Hash Table</h4>
<p>There are two ways to improve the performance:</p>
<ul>
<li>Dynamically growing our HashTable</li>
<li>Improving our HashCodes</li>
</ul>
<h5 id="dynamically-growing-the-hash-table">Dynamically growing the hash table</h5>
<p>Suppose we have <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span> buckets and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span> items. Then our <code>load factor</code> is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mi mathvariant="normal">/</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">N/M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>. N Keeps increasing, so we need to increasing M to make our load factor lower.</p>
<p>For Example:<br>
When <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mi mathvariant="normal">/</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">N/M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span> is &gt;= 1.5, then double M.<br>
<img src="/2023/04/12/cs61b-Data-Structure/resizing.png"></p>
<p>As long as M = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\theta(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>, then <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mi mathvariant="normal">/</mi><mi>M</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N/M)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mclose">)</span></span></span></span> = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span>, <strong>Assuming items are evenly distributed</strong>, lists will be approximately <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mi mathvariant="normal">/</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">N/M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span> long, resulting in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo stretchy="false">(</mo><mi>N</mi><mi mathvariant="normal">/</mi><mi>M</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\theta(N/M)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mclose">)</span></span></span></span> runtimes.</p>
<p>But, one important thing to consider is the cost of the resize operation.</p>
<ul>
<li>Resizing takes <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\theta(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span> time. Have to redistribute all items.</li>
<li>Most add operations will be <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\theta(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span>. Some will be <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\theta(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span> time for resizing.</li>
</ul>
<p>However, there still some flaws for resizing.<br>
Both tables below have load factor of 1. But left table is much worse.<br>
<img src="/2023/04/12/cs61b-Data-Structure/resizing2.png"></p>
<h5 id="good-hashcode-function">Good HashCode function</h5>
<p>A typical hash code base is a <strong>small prime</strong>.</p>
<ul>
<li>Prime can avoid the overflow issue</li>
<li>Lower chance of resulting hashCode having a bad relationship with the number of buckets</li>
<li>Small prime is lower cost to compute.</li>
</ul>
<h2 id="heap">Heap</h2>
<p>Heap is a special data structure which is usually used to solve the priority queue problem.</p>
<ul>
<li><strong>Priority queue</strong>: It is a ADT that optimizes for handling The maximum or minimum elements. Think about this scenario : We wang to return the 10 tallest students in a big class. After we adding 10 students, when we add the 11th student, we remove the smallest one out to keep 10 students until we check all the students’ height.</li>
</ul>
<p>Heap includes min-heap and max-heap. A heap has two properties:</p>
<ul>
<li><strong>Min/Max heap</strong>: Every node is less/bigger or equal to both of its children</li>
<li><strong>Complete</strong>: Missing items only at the bottom level (if any), all nodes are as far left as possible</li>
</ul>
<p>For Example:<br>
<img src="/2023/04/12/cs61b-Data-Structure/heap.png"><br>
The green two three are heaps, and the red twos aren’t.</p>
<h3 id="heap-operations">Heap Operations</h3>
<p><a target="_blank" rel="noopener" href="https://goo.gl/wBKdFQ">Animated demo of below operations</a></p>
<h4 id="add">Add</h4>
<p>When we insert X into the following heap, the processing will be :</p>
<ul>
<li>Add to end of heap temporarily.</li>
<li>Swim up the hierarchy to its right place.</li>
</ul>
<h4 id="getsmallest">getSmallest</h4>
<p>The root is the smallest one. So return the item in the  root node.</p>
<h4 id="removesmallest">removeSmallest</h4>
<ul>
<li>Swap the last item in the heap into the root.</li>
<li>Sink down the hierarchy to the proper place.</li>
</ul>
<h3 id="heap-implementation">Heap Implementation</h3>
<p>Due to heap hast the “complete” property. So we can number the tree from top to bottom and left to right. Then use an array to store the key which the index indicates the position of every node.<br>
<img src="/2023/04/12/cs61b-Data-Structure/heap3.png"></p>
<p>For convenient, offsetting everything by 1 spot.</p>
<img src="/2023/04/12/cs61b-Data-Structure/heap2.png">
<p>It makes computation of children/parent simply:</p>
<ul>
<li>leftChild(k) = k*2</li>
<li>rightChild(k) = k*2+1</li>
<li>parent(k) = k/2</li>
</ul>
<h2 id="graph">Graph</h2>
<p>A graph consists of:</p>
<ul>
<li>A set of vertices (a.k.a nodes).</li>
<li>A set of zero or more edges, each of which connects two nodes.<br>
<img src="/2023/04/12/cs61b-Data-Structure/graph.png"></li>
</ul>
<h3 id="simple-graph">Simple Graph</h3>
<p>A simple graph is a graph with:</p>
<ul>
<li>No edges that connect a vertex to itself, i.e. no “loops”</li>
<li>No two edges that connect the same vertices, i.e. no “parallel edges”<br>
<img src="/2023/04/12/cs61b-Data-Structure/simple graph.png"></li>
</ul>
<h3 id="more-types-and-terminology">More types and Terminology:</h3>
<div class="tabs" id="uuid"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#uuid-1">Directed graph</button></li><li class="tab"><button type="button" data-href="#uuid-2">Undirected graph</button></li><li class="tab"><button type="button" data-href="#uuid-3">acyclic graph</button></li><li class="tab"><button type="button" data-href="#uuid-4">cyclic graph</button></li><li class="tab"><button type="button" data-href="#uuid-5">With Edge Labels graph</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="uuid-1"><p>There are directed graphs, where the edge (u, v) means that the edge starts at u, and goes to v (and the vice versa is not true, unless the edge (v, u) also exists.) Edges in directed graphs have an arrow.<br>
<img src="/2023/04/12/cs61b-Data-Structure/graph2.png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="uuid-2"><p>There are undirected graphs, where an edge (u, v) can mean that the edge goes from the nodes u to v and from the nodes v to u too.<br>
<img src="/2023/04/12/cs61b-Data-Structure/graph3.png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="uuid-3"><p>There are also acyclic graphs. These are graphs that don’t have any cycles.<br>
<img src="/2023/04/12/cs61b-Data-Structure/graph3.png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="uuid-4"><p>And then there are cyclic graphs, i.e., there exists a way to start at a node, follow some unique edges, and return back to the same node you started from.<br>
<img src="/2023/04/12/cs61b-Data-Structure/graph2.png"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="uuid-5"><img src="/2023/04/12/cs61b-Data-Structure/graph4.png"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<ul>
<li>Graph:
<ul>
<li>Set of <em><strong>vertices</strong></em>, a.k.a <em><strong>nodes.</strong></em></li>
<li>Set of <em><strong>edges</strong></em>: Paris of vertices.</li>
<li>Vertices with an edge between are <em><strong>adjacent</strong></em></li>
<li>Vertices or edges may have <em><strong>labels</strong></em> (or <em><strong>weights</strong></em>)</li>
</ul>
</li>
<li>A <em><strong>path</strong></em> is a sequence of vertices connected by edges</li>
<li>A <em><strong>cycle</strong></em> is a path whose first and last vertices are the same.</li>
<li>Two vertices are <em><strong>connected</strong></em> if there is a path between them. If all vertices are connected, we say the graph is connected.</li>
</ul>
</font></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="https://superjohnwen.github.io">John Wen</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://superjohnwen.github.io/2023/04/12/cs61b-Data-Structure/">https://superjohnwen.github.io/2023/04/12/cs61b-Data-Structure/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/cs61b/">cs61b</a></div><div class="post_share"><div class="social-share" data-image="https://fastly.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2023/02/23/cs61A-Note/"><img class="next-cover" src="https://fastly.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">cs61A-Note</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2023/01/05/cs61b-Note/" title="cs61b Note"><img class="cover" src="https://fastly.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-01-05</div><div class="title">cs61b Note</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/duck.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">John Wen</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">33</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#data-structures"><span class="toc-number">1.</span> <span class="toc-text">Data Structures</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#some-resources"><span class="toc-number">1.1.</span> <span class="toc-text">Some Resources</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tree"><span class="toc-number">1.2.</span> <span class="toc-text">Tree</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tree-traversal"><span class="toc-number">1.3.</span> <span class="toc-text">Tree Traversal</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#traversal-orderings"><span class="toc-number">1.3.1.</span> <span class="toc-text">Traversal Orderings</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#depth-first-traversals"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">Depth First Traversals</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#binary-search-tree-bst"><span class="toc-number">1.4.</span> <span class="toc-text">Binary Search Tree (BST)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#bst-definition"><span class="toc-number">1.4.1.</span> <span class="toc-text">BST Definition</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bst-operations"><span class="toc-number">1.4.2.</span> <span class="toc-text">BST Operations</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#height-and-depth"><span class="toc-number">1.4.3.</span> <span class="toc-text">Height and Depth</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#b-trees-2-3-trees-2-3-4-trees"><span class="toc-number">1.5.</span> <span class="toc-text">B-trees &#x2F; 2-3 trees &#x2F; 2-3-4 trees</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#insertion"><span class="toc-number">1.5.1.</span> <span class="toc-text">Insertion</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#deletion"><span class="toc-number">1.5.2.</span> <span class="toc-text">Deletion</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#llrb-left-leaning-red-black-tree"><span class="toc-number">1.6.</span> <span class="toc-text">LLRB (Left Leaning Red Black Tree)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#hash-table"><span class="toc-number">1.7.</span> <span class="toc-text">Hash Table</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#start-with-dataindexedintegerset"><span class="toc-number">1.7.1.</span> <span class="toc-text">Start with “DataIndexedIntegerSet”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#solving-the-word-insertion-problem"><span class="toc-number">1.7.2.</span> <span class="toc-text">Solving the word-insertion problem</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#use-integer-to-represent-string"><span class="toc-number">1.7.2.1.</span> <span class="toc-text">Use Integer to represent String</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#integer-overflow-and-hash-code"><span class="toc-number">1.7.2.2.</span> <span class="toc-text">Integer Overflow and Hash code</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#hash-table"><span class="toc-number">1.7.2.3.</span> <span class="toc-text">Hash Table</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#improve-performance-of-hash-table"><span class="toc-number">1.7.2.4.</span> <span class="toc-text">Improve performance of Hash Table</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#dynamically-growing-the-hash-table"><span class="toc-number">1.7.2.4.1.</span> <span class="toc-text">Dynamically growing the hash table</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#good-hashcode-function"><span class="toc-number">1.7.2.4.2.</span> <span class="toc-text">Good HashCode function</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#heap"><span class="toc-number">1.8.</span> <span class="toc-text">Heap</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#heap-operations"><span class="toc-number">1.8.1.</span> <span class="toc-text">Heap Operations</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#add"><span class="toc-number">1.8.1.1.</span> <span class="toc-text">Add</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#getsmallest"><span class="toc-number">1.8.1.2.</span> <span class="toc-text">getSmallest</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#removesmallest"><span class="toc-number">1.8.1.3.</span> <span class="toc-text">removeSmallest</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#heap-implementation"><span class="toc-number">1.8.2.</span> <span class="toc-text">Heap Implementation</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#graph"><span class="toc-number">1.9.</span> <span class="toc-text">Graph</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#simple-graph"><span class="toc-number">1.9.1.</span> <span class="toc-text">Simple Graph</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#more-types-and-terminology"><span class="toc-number">1.9.2.</span> <span class="toc-text">More types and Terminology:</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/04/12/cs61b-Data-Structure/" title="cs61b-Data Structure"><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="cs61b-Data Structure"/></a><div class="content"><a class="title" href="/2023/04/12/cs61b-Data-Structure/" title="cs61b-Data Structure">cs61b-Data Structure</a><time datetime="2023-04-12T22:20:04.000Z" title="Created 2023-04-12 15:20:04">2023-04-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/23/cs61A-Note/" title="cs61A-Note"><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="cs61A-Note"/></a><div class="content"><a class="title" href="/2023/02/23/cs61A-Note/" title="cs61A-Note">cs61A-Note</a><time datetime="2023-02-23T19:11:29.000Z" title="Created 2023-02-23 11:11:29">2023-02-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/12/Python-DB-SQL-Note/" title="Python DB &amp; SQL"><img src="https://raw.githubusercontent.com/SuperJohnWen/SuperJohnWen.github.io/master/img/python.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python DB &amp; SQL"/></a><div class="content"><a class="title" href="/2023/02/12/Python-DB-SQL-Note/" title="Python DB &amp; SQL">Python DB &amp; SQL</a><time datetime="2023-02-13T06:26:35.000Z" title="Created 2023-02-12 22:26:35">2023-02-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/12/Python-Data-Type/" title="Python Data Type"><img src="https://raw.githubusercontent.com/SuperJohnWen/SuperJohnWen.github.io/master/img/python.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python Data Type"/></a><div class="content"><a class="title" href="/2023/02/12/Python-Data-Type/" title="Python Data Type">Python Data Type</a><time datetime="2023-02-13T06:26:35.000Z" title="Created 2023-02-12 22:26:35">2023-02-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/05/cs61b-Note/" title="cs61b Note"><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="cs61b Note"/></a><div class="content"><a class="title" href="/2023/01/05/cs61b-Note/" title="cs61b Note">cs61b Note</a><time datetime="2023-01-05T17:45:16.000Z" title="Created 2023-01-05 09:45:16">2023-01-05</time></div></div></div></div></div></div></main><footer id="footer" style="background: rgba(255,255,255,0)"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By John Wen</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="Chat"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://my-twikoo-git-main-superjohnwen.vercel.app/',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://my-twikoo-git-main-superjohnwen.vercel.app/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>